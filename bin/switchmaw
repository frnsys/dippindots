#!/bin/bash
# For switching annotation file
# for the hili/maw extension

DIR=~/notes/web
CURRENT=$(basename $(readlink -f $DIR/annos.json) .json)
TAG=$(find "$DIR" -type f -name "*.json" | xargs -n1 -I{} bash -c 'basename {} .json' | dmenu -p "tag ($CURRENT):")
if [ -z "$TAG" ]; then
    exit 0
fi

FILE=$DIR/$TAG.json

if [ ! -f $FILE ]; then
    touch $FILE
fi
ln -sf $FILE $DIR/annos.json
notify-send "$FILE is now active maw file"
